#!/usr/bin/env bash
set -euo pipefail

HASURA_PORT=${HASURA_GRAPHQL_SERVER_PORT:-'8080'}
HASURA_SECRET=${HASURA_GRAPHQL_ADMIN_SECRET:-'mysecretkey'}
HASURA_ENDPOINT=${HASURA_GRAPHQL_ENDPOINT:-"http://localhost:$HASURA_PORT"}


docker run --rm \
 -p 8080:8080 \
  -e HASURA_GRAPHQL_DATABASE_URL="$HASURA_GRAPHQL_DATABASE_URL" \
  -e HASURA_GRAPHQL_ENABLE_CONSOLE=true \
  -e HASURA_GRAPHQL_ADMIN_SECRET="$HASURA_GRAPHQL_ADMIN_SECRET" \
  -e HASURA_GRAPHQL_METADATA_DATABASE_URL="$HASURA_GRAPHQL_METADATA_DATABASE_URL" \
 hasura/graphql-engine:v${HASURA_VERSION}
